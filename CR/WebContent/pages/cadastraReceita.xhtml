<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      template="/pages/template.xhtml"> 
<h:head></h:head> 
<body>
<ui:define name="conteudo"> 
	<h:form id="frm">
		<p:panelGrid columns="2" id="gridReceita">
			<h:outputText value="Id: " />
			<h:outputText value="#{receitaMB.receita.id}" />
			
			<h:outputText value="Nome: " />
			<h:inputText id="inNome" value="#{receitaMB.receita.nome}" />
			
			<h:outputText value="Tempo de Preparo em Minutos: " />
			<h:inputText id="inTempoPreparo" value="#{receitaMB.receita.tempoPreparo}" />
			
			<h:outputText value="---"/>
			<h:outputText value="Valor da Mão de Obra por hora de Trabalho"/>
			
			<h:outputText value="Mão de Obra por hora: " />
			<h:inputText id="inValormMaoDeObraHora" value="#{receitaMB.receita.valorMaoDeObraHora}" />
			
			<h:outputText value="---"/>
			<h:outputText value="Escolha a margem de Lucro"/>
			
			<h:outputLabel value="Porcentagem de Lucro: " />
			<p:selectOneMenu id="inPorcentagemLucro" value="#{receitaMB.receita.porcentagemlucro}" >
				<f:selectItem itemLabel="30%" itemValue="30"/>
				<f:selectItem itemLabel="40%" itemValue="40"/>
				<f:selectItem itemLabel="50%" itemValue="50"/>
				<f:selectItem itemLabel="60%" itemValue="60"/>
				<f:selectItem itemLabel="70%" itemValue="70"/>
				<f:selectItem itemLabel="80%" itemValue="80"/>
				<f:selectItem itemLabel="90%" itemValue="90"/>
				<f:selectItem itemLabel="100%" itemValue="100"/>
			</p:selectOneMenu>
			
			<p:outputLabel value="Está ativa: " />
			<p:selectOneMenu id="inAtiva" value="#{receitaMB.receita.flAtiva}" >
				<f:selectItem itemLabel="Sim" itemValue="true"/>
				<f:selectItem itemLabel="Não" itemValue="false"/>
			</p:selectOneMenu>

		</p:panelGrid>
	 	
		<h:outputText value="------" />
		
		<p:panelGrid columns="2" id="gridIngrediente">
			<h:outputText value="Nome: " />
			<h:inputText value="#{receitaMB.ingrediente.nome}" />
			
			<h:outputText value="Marca: " />
			<h:inputText value="#{receitaMB.ingrediente.marca}" />
			
			<h:outputText value="Fornecedor: " />
			<h:inputText value="#{receitaMB.ingrediente.fornecedor}" />
			
			<h:outputText value="Valor por Unidade: " />
			<h:inputText value="#{receitaMB.ingrediente.valorUnidade}" />
			
			<h:outputText value="Unidade de Medida : " />
			<p:selectOneMenu value="#{receitaMB.ingrediente.unidadeMedidaCompra}">
				<f:selectItems value="#{receitaMB.unidadesMedidas}" var="unidadeMedida" 
					itemValue="#{unidadeMedida.descricao}" itemLabel="#{unidadeMedida.descricao}"  />	
				<f:attribute name="listaUnidadeMedida" value="#{receitaMB.unidadesMedidas}"/>
			</p:selectOneMenu>
			
			<h:outputText value="Quantidade: " />
			<h:inputText value="#{receitaMB.ingrediente.quantidade}" />
			
				<h:outputText value="Unidade de Medida da Receita " />
				<p:selectOneMenu value="#{receitaMB.ingrediente.unidadeMedidaReceita}">
					<f:selectItems value="#{receitaMB.unidadesMedidas}" var="unidadeMedida" itemValue="#{unidadeMedida.descricao}" itemLabel="#{unidadeMedida.descricao}"  />	
					<f:attribute name="listaUnidadeMedida" value="#{receitaMB.unidadesMedidas}"/>
				</p:selectOneMenu>
			
		</p:panelGrid>
		<h:panelGrid columns="1">
			<h:commandButton actionListener="#{receitaMB.addIngrediente}" value="AddIngrediente" >
				<f:ajax execute="gridIngrediente gridReceita" render="@form"  />		
			</h:commandButton>	
		
			<h:commandButton action="#{receitaMB.calculaValorVenda}" value="Calcula Total" type="button">
				<f:ajax execute="gridReceita gridIngrediente" render="@form" />
			</h:commandButton>
		</h:panelGrid>		
			<p:dataTable var="val" value="#{receitaMB.receita}">
			<f:facet name="header">
            	Valores
        	</f:facet>
        	<p:column headerText ="Valor de Venda - Editavel">
        		<p:inplace id="basic">
            		<p:inputText value="#{val.valorVenda}" />
        		</p:inplace>
 			</p:column>
 			<p:column headerText="Valor de Custo">
 				<h:outputText value="#{val.valorCusto}" />
 			</p:column>
 			<p:column headerText="Valor de Lucro">
 				<h:outputText value="#{val.valorLucro}" />
 			</p:column>
 			<p:column headerText="Valor de Ingredientes">
 				<h:outputText value="#{val.valorIngredientes}"/>
 			</p:column>
 			<p:column headerText="Valor Mão de Obra">
 				<h:outputText value="#{val.valorMaoDeObra}"/>
 			</p:column>
			<p:column headerText="Valo Mão de Obra p/ Hora">
				<h:outputText value="#{val.valorMaoDeObraHora}" />
			</p:column>
			</p:dataTable>	
	
			<h:commandButton action="#{receitaMB.salvar}" value="Salvar">
				<f:ajax execute="gridReceita gridIngrediente" render="@form" />
			</h:commandButton>	
	</h:form>
</ui:define>
</body> 
</ui:composition>
